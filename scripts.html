<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>statslab - 3&nbsp; Basic Programming</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data.html" rel="next">
<link href="./programming.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/logos/beta.png" alt="Several beta distributions" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">statslab</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/cluhmann/statslab" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./rlang.html">Beginnings</a></li><li class="breadcrumb-item"><a href="./scripts.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic Programming</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Beginnings</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rlang.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R &amp; RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R as a Calculator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scripts.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Exploring</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The Tidyverse</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tibbles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Dataframes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Manipulating Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualizing Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Statistics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./descriptives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Descriptive Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hypothesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Hypothesis Testing</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Sampling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./samplepvalues.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Using <em>p</em>-values to test a hypothesis</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Data Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Bibliography</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rannoyances.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">A Running List of Annoying R Things</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#scripts" id="toc-scripts" class="nav-link active" data-scroll-target="#scripts"><span class="header-section-number">3.1</span> Scripts</a>
  <ul class="collapse">
  <li><a href="#why-use-scripts" id="toc-why-use-scripts" class="nav-link" data-scroll-target="#why-use-scripts"><span class="header-section-number">3.1.1</span> Why use scripts?</a></li>
  <li><a href="#our-first-script" id="toc-our-first-script" class="nav-link" data-scroll-target="#our-first-script"><span class="header-section-number">3.1.2</span> Our first script</a></li>
  <li><a href="#commenting-your-script" id="toc-commenting-your-script" class="nav-link" data-scroll-target="#commenting-your-script"><span class="header-section-number">3.1.3</span> Commenting your script</a></li>
  <li><a href="#differences-between-scripts-and-the-command-line" id="toc-differences-between-scripts-and-the-command-line" class="nav-link" data-scroll-target="#differences-between-scripts-and-the-command-line"><span class="header-section-number">3.1.4</span> Differences between scripts and the command line</a></li>
  <li><a href="#done" id="toc-done" class="nav-link" data-scroll-target="#done"><span class="header-section-number">3.1.5</span> Done!</a></li>
  </ul></li>
  <li><a href="#sec-loops" id="toc-sec-loops" class="nav-link" data-scroll-target="#sec-loops"><span class="header-section-number">3.2</span> Loops</a>
  <ul class="collapse">
  <li><a href="#sec-while" id="toc-sec-while" class="nav-link" data-scroll-target="#sec-while"><span class="header-section-number">3.2.1</span> The <code>while</code> loop</a></li>
  <li><a href="#sec-for" id="toc-sec-for" class="nav-link" data-scroll-target="#sec-for"><span class="header-section-number">3.2.2</span> The <code>for</code> loop</a></li>
  <li><a href="#a-more-realistic-example-of-a-loop" id="toc-a-more-realistic-example-of-a-loop" class="nav-link" data-scroll-target="#a-more-realistic-example-of-a-loop"><span class="header-section-number">3.2.3</span> A more realistic example of a loop</a></li>
  </ul></li>
  <li><a href="#sec-if" id="toc-sec-if" class="nav-link" data-scroll-target="#sec-if"><span class="header-section-number">3.3</span> Conditional statements</a></li>
  <li><a href="#sec-writingfunctions" id="toc-sec-writingfunctions" class="nav-link" data-scroll-target="#sec-writingfunctions"><span class="header-section-number">3.4</span> Writing functions</a>
  <ul class="collapse">
  <li><a href="#sec-dotsargument" id="toc-sec-dotsargument" class="nav-link" data-scroll-target="#sec-dotsargument"><span class="header-section-number">3.4.1</span> Function arguments revisited</a></li>
  <li><a href="#theres-more-to-functions-than-this" id="toc-theres-more-to-functions-than-this" class="nav-link" data-scroll-target="#theres-more-to-functions-than-this"><span class="header-section-number">3.4.2</span> There’s more to functions than this</a></li>
  </ul></li>
  <li><a href="#sec-vectorised" id="toc-sec-vectorised" class="nav-link" data-scroll-target="#sec-vectorised"><span class="header-section-number">3.5</span> Implicit loops</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-scripting" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic Programming</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>So far, we have have been typing all our commands at the command prompt. But sometimes stringing all these individual commands together can get rather disorganized and confusing. In this chapter, we will discuss how to pack a set of commands into a single file: a computer program.</p>
<section id="scripts" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="scripts"><span class="header-section-number">3.1</span> Scripts</h2>
<p>Computer programs come in quite a few different forms: the kind of program that we’re mostly interested in from the perspective of everyday data analysis using R is known as a <strong>script</strong>. The idea behind a script is that, instead of typing your commands into the R console one at a time, instead you write them all in a text file. Then, once you’ve finished writing them and saved the text file, you can get R to execute all the commands in your file by using the <code>source()</code> function. In a moment I’ll show you exactly how this is done, but first I’d better explain why you should care.</p>
<section id="why-use-scripts" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="why-use-scripts"><span class="header-section-number">3.1.1</span> Why use scripts?</h3>
<p>Before discussing scripting and programming concepts in any more detail, it’s worth stopping to ask why you should bother. After all, if you look at the R commands that I’ve used everywhere else this book, you’ll notice that they’re all formatted as if I were typing them at the command line. Outside this chapter you won’t actually see any scripts. But <strong>do not be fooled by this</strong>. The reason for this is purely for pedagogical reasons. To teach statistics and data analysis, it is natural to chop everything up into tiny little slices: each section tends to focus on one kind of statistical concept, and only a smallish number of R functions. It is far easier to see what each function does in isolation, one command at a time. By presenting everything as if it were being typed at the command line, it avoids piecing together many, many different commands into one big script. From a teaching (and learning) perspective that’s the right thing to do. But from a <em>data analysis</em> perspective, it is not. When you start analyzing real world data sets, you will rapidly find yourself needing to write scripts.</p>
<p>To understand why scripts are so very useful, it may be helpful to consider the drawbacks to typing commands directly at the command prompt. The approach that we’ve been adopting so far, in which you type commands one at a time, and R sits there patiently in between commands, is referred to as the <strong><em>interactive</em></strong> style. Doing your data analysis this way is rather like having a conversation … a very annoying conversation between you and your data set, in which you and the data aren’t directly speaking to each other, and so you have to rely on R to pass messages back and forth. This approach makes a lot of sense when you’re just trying out a few ideas: maybe you’re trying to figure out what analyses are sensible for your data, or maybe just you’re trying to remember how the various R functions work, so you’re just typing in a few commands until you get the one you want. In other words, the interactive style is very useful as a tool for exploring your data. However, it has a number of drawbacks:</p>
<ul>
<li><p><em>It’s difficult to save your work effectively</em>. You can save the workspace, so that later on you can load any variables you created. You can save your plots as images. And you can even save the history or copy the contents of the R console to a file. Taken together, all these things let you create a reasonably decent record of what you did. But it does leave a lot to be desired. It seems like you ought to be able to save a single file that R could use (in conjunction with your raw data files) and reproduce everything (or at least, everything interesting) that you did during your data analysis.</p></li>
<li><p><em>It’s annoying to have to go back to the beginning when you make a mistake</em>. Suppose you’ve just spent the last two hours typing in commands. Over the course of this time you’ve created lots of new variables and run lots of analyses. Then suddenly you realize that there was a nasty typo in the first command you typed, so all of your later numbers are wrong. Now you have to fix that first command, and then spend another hour or so combing through the R history to try and recreate what you did.</p></li>
<li><p><em>You can’t leave notes for yourself</em>. Sure, you can scribble down some notes on a piece of paper, or even save a Word document that summarizes what you did. But what you really want to be able to do is write down an English translation of your R commands, preferably right “next to” the commands themselves. That way, you can look back at what you’ve done and actually remember what you were doing. In the simple exercises we’ve engaged in so far, it hasn’t been all that hard to remember what you were doing or why you were doing it, but only because everything we’ve done could be done using only a few commands, and you’ve never been asked to reproduce your analysis six months after you originally did it! When your data analysis starts involving hundreds of variables, and requires quite complicated commands to work, then you really, really need to leave yourself some notes to explain your analysis to, well, yourself.</p></li>
<li><p><em>It’s nearly impossible to reuse your analyses later, or adapt them to similar problems</em>. Suppose that, sometime in January, you are handed a difficult data analysis problem. After working on it for ages, you figure out some really clever tricks that can be used to solve it. Then, in September, you get handed a really similar problem. You can sort of remember what you did, but not very well. You’d like to have a clean record of what you did last time, how you did it, and why you did it the way you did. Something like that would really help you solve this new problem.</p></li>
<li><p><em>It’s hard to do anything except the basics</em>. There’s a nasty side effect of these problems. Typos are inevitable. Even the best data analyst in the world makes a lot of mistakes. So the chance that you’ll be able to string together dozens of correct R commands in a row are very small. So unless you have some way around this problem, you’ll never really be able to do anything other than simple analyses.</p></li>
<li><p><em>It’s difficult to share your work other people</em>. Because you don’t have this nice clean record of what R commands were involved in your analysis, it’s not easy to share your work with other people. Sure, you can send them all the data files you’ve saved, and your history and console logs, and even the little notes you wrote to yourself, but odds are pretty good that no-one else will really understand what’s going on.</p></li>
</ul>
<p>Ideally, what you’d like to be able to do is start out with a data set (e.g., <code>myrawdata.csv</code>). What you want is a single document (e.g., <code>mydataanalysis.R</code>) that stores all of the commands that you’ve used in order to do your data analysis. Kind of similar to the R history but much more focused. It would only include the commands that you want to keep for later. Then, later on, instead of typing in all those commands again, you’d just tell R to run all of the commands that are stored in <code>mydataanalysis.R</code>. Also, in order to help you make sense of all those commands, what you’d want is the ability to add some notes or <em>comments</em> within the file, so that anyone reading the document for themselves would be able to understand what each of the commands actually does. But these comments wouldn’t get in the way: when you try to get R to run <code>mydataanalysis.R</code> it would be smart enough would recognize that these comments are for the benefit of humans, and so it would ignore them. Later on you could tweak a few of the commands inside the file (maybe in a new file called <code>mynewdatanalaysis.R</code>) so that you can adapt an old analysis to be able to handle a new problem. And you could email your friends and colleagues a copy of this file so that they can reproduce your analysis themselves.</p>
<p>In other words, what you want is a <em>script</em>.</p>
</section>
<section id="our-first-script" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="our-first-script"><span class="header-section-number">3.1.2</span> Our first script</h3>
<p>Okay then. Since scripts are so terribly awesome, let’s write one. One approach would be to use a simple text editor like Apple’s TextEdit or Microsoft’s Notepad (not something like Microsoft Word). However, we will instead use Rstudio. To create new script file in R studio, go to the “File” menu, select the “New” option, and then click on “R script”. This will open a new window within the “source” panel. Then you can type the commands you want and save it when you’re done. The nice thing about using Rstudio to do this is that it automatically changes the color of the text to indicate which parts of the code are comments and which are parts are actual R commands (these colors are called <strong><em>syntax highlighting</em></strong>, but they’re not actually part of the file – it’s just Rstudio trying to be helpful. To see an example of this, let’s create a script called <code>hello.R</code> script in Rstudio. To do this, go to the “File” menu again, and select “Open…”. Once you’ve opened the file, you should be looking at a black script. Then you can type (or copy and paste) the commands below into your script so that the contents of your script look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- hello.R</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"hello world"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The line at the top is the name of our script, and not part of the script itself. Below that, you can see the two R commands that make up the script itself.</p>
<p>So how do we run the script? Assuming that the <code>hello.R</code> file has been saved to your working directory, then you can run the script using the following command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"hello.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If the script file is saved in a different directory, then you need to specify the path to the file, in exactly the same way that you would have to when loading a data file using <code>load()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">file.path</span>(projecthome,<span class="st">"scripts"</span>,<span class="st">"hello.R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In either case, this is the output we see when we run our script:</p>
<div class="cell" data-ehco="false">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"hello world"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
</div>
<p>If we inspect the workspace using a command like <code>who()</code> or <code>objects()</code>, we discover that R has created the new variable <code>x</code> within the workspace, and not surprisingly <code>x</code> is a character string containing the text <code>"hello world"</code>. And just like that, you’ve written your first program R. It really is that simple.</p>
<p>Beyond being the primary tool we use to interact with R, using Rstudio for your text editor is convenient for other reasons too. In the top right hand corner of the source pane there’s a little button that reads “Source”. If you click on that, Rstudio will construct the relevant <code>source()</code> command for you, and send it straight to the R console. So you don’t even have to type in the <code>source()</code> command, which actually I think is a great thing, because it really bugs me having to type all those extra keystrokes every time I want to run my script. Anyway, Rstudio provide several other convenient little tools to help make scripting easier that you will discover along the way.</p>
</section>
<section id="commenting-your-script" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="commenting-your-script"><span class="header-section-number">3.1.3</span> Commenting your script</h3>
<p>When writing up your data analysis as a script, one thing that is generally a good idea is to include a lot of comments in the code. That way, if someone else tries to read it (or if you come back to it several days, weeks, months or years later) they can figure out what’s going on. As a beginner, I think it’s especially useful to comment thoroughly, partly because it gets you into the habit of commenting the code, and partly because the simple act of typing in an explanation of what the code does will help you keep it clear in your own mind what you’re trying to achieve. To illustrate this idea, consider the following script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- itngscript.R</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A script to analyse nightgarden.Rdata_</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  author: Danielle Navarro_</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  date: 22/11/2011_</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data, and tell the user that this is what we're</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># doing. </span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>( <span class="st">"loading data from nightgarden.Rdata...</span><span class="sc">\n</span><span class="st">"</span> )</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">file.path</span>(projecthome,<span class="st">"data"</span>,<span class="st">"nightgarden.Rdata"</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cross tabulation and print it out:</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>( <span class="st">"tabulating data...</span><span class="sc">\n</span><span class="st">"</span> )</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>itng.table <span class="ot">&lt;-</span> <span class="fu">table</span>( speaker, utterance )</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>( itng.table )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The comments at the top of the script explain the purpose of the script, who wrote it, and when it was written. Then, comments throughout the script file itself explain what each section of the code actually does. In real life people don’t tend to comment this thoroughly, but that’s because people are lazy and never fully appreciate who might try and decipher their scripts in the future (including the author themselves). You really want your script to explain itself. Nevertheless, as you’d expect R completely ignores all of the commented parts.</p>
</section>
<section id="differences-between-scripts-and-the-command-line" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="differences-between-scripts-and-the-command-line"><span class="header-section-number">3.1.4</span> Differences between scripts and the command line</h3>
<p>For the most part, commands that you insert into a script behave in exactly the same way as they would if you typed the same thing in at the command line. The one major exception to this is that if you want a variable to be printed on screen, you need to explicitly tell R to print it. You can’t just type the name of the variable. For example, our original <code>hello.R</code> script produced visible output. The following script <strong>does not</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- silenthello.R</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"hello world"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It <em>does</em> still create the variable <code>x</code> when you <code>source()</code> the script, but it won’t print anything on screen.</p>
<p>However, apart from the fact that scripts don’t use “auto-printing” as it’s called, there aren’t a lot of differences in the underlying mechanics. There are a few stylistic differences though. For instance, if you want to load a package at the command line, you would generally use the <code>library()</code> function. If you want do to it from a script, it’s conventional to use <code>require()</code> instead. The two commands are basically identical, the only difference being that if the package doesn’t exist, <code>require()</code> produces a warning whereas <code>library()</code> gives you an error. Stylistically, what this means is that if the <code>require()</code> command fails in your script, R will boldly continue on and try to execute the rest of the script. Often that’s what you’d like to see happen, so it’s better to use <code>require()</code>. Clearly, however, you can get by just fine using the <code>library()</code> command for everyday usage.</p>
</section>
<section id="done" class="level3" data-number="3.1.5">
<h3 data-number="3.1.5" class="anchored" data-anchor-id="done"><span class="header-section-number">3.1.5</span> Done!</h3>
<p>At this point, you’ve learned the basics of scripting. You are now officially allowed to say that you can program in R, though you probably shouldn’t say it too loudly. There’s a <em>lot</em> more to learn, but nevertheless, if you can write scripts like these then what you are doing is in fact basic programming. The rest of this chapter is devoted to introducing some of the key commands that you need in order to make your programs more powerful; and to help you get used to thinking in terms of scripts, for the rest of this chapter I’ll write up most of my extracts as scripts.</p>
</section>
</section>
<section id="sec-loops" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="sec-loops"><span class="header-section-number">3.2</span> Loops</h2>
<p>For all the scripts that we’ve seen so far R starts at the top of the file and runs straight through to the end of the file. However, you actually have quite a lot of flexibility in how and when commands are executed. Depending on how you write the script, you can have R repeat several commands, or skip over different commands, and so on. This topic is referred to as <strong><em>flow control</em></strong>, and the first concept to discuss in this respect is the idea of a <strong><em>loop</em></strong>. The basic idea is very simple: a loop is a block of code (i.e., a sequence of commands) that R will execute over and over again until some termination criterion is met. Looping is a very powerful idea. There are three different ways to construct a loop in R, based on the <code>while</code>, <code>for</code> and <code>repeat</code> functions. I’ll only discuss the first two in this book.</p>
<section id="sec-while" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="sec-while"><span class="header-section-number">3.2.1</span> The <code>while</code> loop</h3>
<p>A <code>while</code> loop is a simple thing. The basic format of the loop looks like this:</p>
<pre><code>     while ( CONDITION ) {
        STATEMENT1
        STATEMENT2
        ETC
     }</code></pre>
<p>The code corresponding to CONDITION needs to produce a logical value, either <code>TRUE</code> or <code>FALSE</code>. Whenever R encounters a <code>while</code> statement, it checks to see if the CONDITION is <code>TRUE</code>. If it is, then R goes on to execute all of the commands inside the curly brackets, proceeding from top to bottom as usual. However, when it gets to the bottom of those statements, it moves back up to the <code>while</code> statement. Then, like the mindless automaton it is, it checks to see if the CONDITION is <code>TRUE</code>. If it is, then R goes on to execute all … well, you get the idea. This continues endlessly until at some point the CONDITION turns out to be <code>FALSE</code>. Once that happens, R jumps to the bottom of the loop (i.e., to the <code>}</code> character), and then continues on with whatever commands appear next in the script.</p>
<p>To start with, let’s keep things simple, and use a <code>while</code> loop to calculate the smallest multiple of 17 that is greater than or equal to 1000. This is a very silly example since you can actually calculate it using simple arithmetic operations, but the point here isn’t to do something novel. The point is to show how to write a <code>while</code> loop. Here’s the script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- whileexample.R</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> ( x <span class="sc">&lt;</span> <span class="dv">1000</span> ) {</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">17</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>( x )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When we run this script, R starts at the top and creates a new variable called <code>x</code> and assigns it a value of 0. It then moves down to the loop, and “notices” that the condition here is <code>x &lt; 1000</code>. Since the current value of <code>x</code> is zero, the condition is true, so it enters the body of the loop (inside the curly braces). There’s only one command here which instructs R to increase the value of <code>x</code> by 17. R then returns to the top of the loop, and rechecks the condition. The value of <code>x</code> is now 17. R then returns to the <code>while ( x &lt; 1000 ) {</code> line and notices that <code>x</code> is still less than 1000, and so the loop continues. This cycle will continue for a total of 59 iterations, until finally <code>x</code> reaches a value of 1003 (i.e., <span class="math inline">\(59 \times 17 = 1003\)</span>). At this point, the loop stops, and R finally reaches the final line of the script, prints out the value of <code>x</code> on screen, and then halts.</p>
</section>
<section id="sec-for" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="sec-for"><span class="header-section-number">3.2.2</span> The <code>for</code> loop</h3>
<p>The <code>for</code> loop is also pretty simple, though not quite as simple as the <code>while</code> loop. The basic format of this loop goes like this:</p>
<pre><code>     for ( VAR in VECTOR ) {
        STATEMENT1
        STATEMENT2
        ETC
     }</code></pre>
<p>In a <code>for</code> loop, R runs a fixed number of iterations. We have a VECTOR which has several elements, each one corresponding to a possible value of the variable VAR. In the first iteration of the loop, VAR is given a value corresponding to the first element of VECTOR; in the second iteration of the loop VAR gets a value corresponding to the second value in VECTOR; and so on. Once we’ve exhausted all of the values in VECTOR, the loop terminates and the flow of the program continues down the script.</p>
<p>Once again, let’s use some very simple examples. Here is a program that just prints out the word “hello” three times and then stops:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- forexample.R</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ( i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> ) {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>( <span class="st">"hello"</span> )</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is the simplest example of a <code>for</code> loop. The vector of possible values for the <code>i</code> variable just corresponds to the numbers from 1 to 3. Not only that, the body of the loop doesn’t actually depend on <code>i</code> at all.</p>
<p>However, there’s nothing that stops you from using something non-numeric as the vector of possible values, as the following example illustrates. This time around, we’ll use a character vector to control our loop, which in this case will be a vector of <code>words</code>. And what we’ll do in the loop is get R to convert the word to upper case letters, calculate the length of the word, and print it out. Here’s the script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- forexample2.R</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#the words_</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"it"</span>,<span class="st">"was"</span>,<span class="st">"the"</span>,<span class="st">"dirty"</span>,<span class="st">"end"</span>,<span class="st">"of"</span>,<span class="st">"winter"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#loop over the words_</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ( w <span class="cf">in</span> words ) {</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  w.length <span class="ot">&lt;-</span> <span class="fu">nchar</span>( w )     <span class="co"># calculate the number of letters_</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  W <span class="ot">&lt;-</span> <span class="fu">toupper</span>( w )          <span class="co"># convert the word to upper case letters_</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  msg <span class="ot">&lt;-</span> <span class="fu">paste</span>( W, <span class="st">"has"</span>, w.length, <span class="st">"letters"</span> )   <span class="co"># a message to print_</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>( msg )               <span class="co"># print it_</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And here’s the output:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "IT has 2 letters"
[1] "WAS has 3 letters"
[1] "THE has 3 letters"
[1] "DIRTY has 5 letters"
[1] "END has 3 letters"
[1] "OF has 2 letters"
[1] "WINTER has 6 letters"</code></pre>
</div>
</div>
<p>Pretty straightforward I hope.</p>
</section>
<section id="a-more-realistic-example-of-a-loop" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="a-more-realistic-example-of-a-loop"><span class="header-section-number">3.2.3</span> A more realistic example of a loop</h3>
<p>To give you a sense of how you can use a loop in a more complex situation, let’s write a simple script to simulate the progression of a mortgage. Suppose we have a nice young couple who borrow $300000 from the bank, at an annual interest rate of 5%. The mortgage is a 30 year loan, so they need to pay it off within 360 months total. Our happy couple decide to set their monthly mortgage payment at $1600 per month. Will they pay off the loan in time or not? Only time will tell. Or, alternatively, we could simulate the whole process and get R to tell us. The script to run this is a fair bit more complicated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- mortgage.R</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># set up</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>month <span class="ot">&lt;-</span> <span class="dv">0</span>        <span class="co"># count the number of months</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>balance <span class="ot">&lt;-</span> <span class="dv">300000</span> <span class="co"># initial mortgage balance</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>payments <span class="ot">&lt;-</span> <span class="dv">1600</span>  <span class="co"># monthly payments</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>interest <span class="ot">&lt;-</span> <span class="fl">0.05</span>  <span class="co"># 5% interest rate per year</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>total.paid <span class="ot">&lt;-</span> <span class="dv">0</span>   <span class="co"># track what you've paid the bank</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># convert annual interest to a monthly multiplier</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>monthly.multiplier <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">+</span>interest) <span class="sc">^</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># keep looping until the loan is paid off...</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> ( balance <span class="sc">&gt;</span> <span class="dv">0</span> ) {</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># do the calculations for this month</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  month <span class="ot">&lt;-</span> month <span class="sc">+</span> <span class="dv">1</span>  <span class="co"># one more month</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  balance <span class="ot">&lt;-</span> balance <span class="sc">*</span> monthly.multiplier  <span class="co"># add the interest</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  balance <span class="ot">&lt;-</span> balance <span class="sc">-</span> payments  <span class="co"># make the payments</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  total.paid <span class="ot">&lt;-</span> total.paid <span class="sc">+</span> payments <span class="co"># track the total paid</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print the results on screen</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>( <span class="st">"month"</span>, month, <span class="st">": balance"</span>, <span class="fu">round</span>(balance), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>} <span class="co"># end of loop</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co"># print the total payments at the end</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"total payments made"</span>, total.paid, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To explain what’s going on, let’s go through it carefully. In the first block of code (under <code>#set up</code>) all we’re doing is specifying all the variables that define the problem. The loan starts with a <code>balance</code> of $300,000 owed to the bank on <code>month</code> zero, and at that point in time the <code>total.paid</code> money is nothing. The couple is making monthly <code>payments</code> of $1600, at an annual <code>interest</code> rate of 5%. Next, we convert the annual percentage interest into a monthly multiplier. That is, the number that you have to multiply the current balance by each month in order to produce an annual interest rate of 5%. An annual interest rate of 5% implies that, if no payments were made over 12 months the balance would end up being <span class="math inline">\(1.05\)</span> times what it was originally, so the <em>annual</em> multiplier is <span class="math inline">\(1.05\)</span>. To calculate the monthly multiplier, we need to calculate the 12th root of 1.05 (i.e., raise 1.05 to the power of 1/12). We store this value in as the <code>monthly.multiplier</code> variable, which as it happens corresponds to a value of about 1.004. All of which is a rather long winded way of saying that the <em>annual</em> interest rate of 5% corresponds to a <em>monthly</em> interest rate of about 0.4%.</p>
<p>All of that is really just setting the stage. It’s not the interesting part of the script. The more interesting part is the loop. The <code>while</code> statement tells R that it needs to keep looping until the <code>balance</code> reaches zero (or less, since it might be that the final payment of $1600 pushes the balance below zero). Then, inside the body of the loop, we have two different blocks of code. In the first bit, we do all the number crunching. Firstly we increase the value <code>month</code> by 1. Next, the bank charges the interest, so the <code>balance</code> goes up. Then, the couple makes their monthly payment and the <code>balance</code> goes down. Finally, we keep track of the total amount of money that the couple has paid so far, by adding the <code>payments</code> to the running tally. After having done all this number crunching, we tell R to issue the couple with a very terse monthly statement, which just indicates how many months they’ve been paying the loan and how much money they still owe the bank. Which is rather rude of us really. I’ve grown attached to this couple and I really feel they deserve better than that. But, that’s banks for you.</p>
<p>In any case, the key thing here is the tension between the increase in <code>balance</code> on and the decrease. As long as the decrease is bigger, then the balance will eventually drop to zero and the loop will eventually terminate. If not, the loop will continue forever! This is actually very bad programming on my part: I really should have included something to force R to stop if this goes on too long. However, I haven’t shown you how to evaluate “if” statements yet, so we’ll just have to hope that the author of the book has rigged the example so that the code actually runs. Hm. I wonder what the odds of that are? Anyway, assuming that the loop does eventually terminate, there’s one last line of code that prints out the total amount of money that the couple handed over to the bank over the lifetime of the loan.</p>
<p>Now that I’ve explained everything in the script in tedious detail, let’s run it and see what happens:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>month 1 : balance 299622 
month 2 : balance 299243 
month 3 : balance 298862 
month 4 : balance 298480 
month 5 : balance 298096 
month 6 : balance 297710 
month 7 : balance 297323 
month 8 : balance 296934 
month 9 : balance 296544 
month 10 : balance 296152 
month 11 : balance 295759 
month 12 : balance 295364 
month 13 : balance 294967 
month 14 : balance 294569 
month 15 : balance 294169 
month 16 : balance 293768 
month 17 : balance 293364 
month 18 : balance 292960 
month 19 : balance 292553 
month 20 : balance 292145 
month 21 : balance 291735 
month 22 : balance 291324 
month 23 : balance 290911 
month 24 : balance 290496 
month 25 : balance 290079 
month 26 : balance 289661 
month 27 : balance 289241 
month 28 : balance 288820 
month 29 : balance 288396 
month 30 : balance 287971 
month 31 : balance 287545 
month 32 : balance 287116 
month 33 : balance 286686 
month 34 : balance 286254 
month 35 : balance 285820 
month 36 : balance 285385 
month 37 : balance 284947 
month 38 : balance 284508 
month 39 : balance 284067 
month 40 : balance 283625 
month 41 : balance 283180 
month 42 : balance 282734 
month 43 : balance 282286 
month 44 : balance 281836 
month 45 : balance 281384 
month 46 : balance 280930 
month 47 : balance 280475 
month 48 : balance 280018 
month 49 : balance 279559 
month 50 : balance 279098 
month 51 : balance 278635 
month 52 : balance 278170 
month 53 : balance 277703 
month 54 : balance 277234 
month 55 : balance 276764 
month 56 : balance 276292 
month 57 : balance 275817 
month 58 : balance 275341 
month 59 : balance 274863 
month 60 : balance 274382 
month 61 : balance 273900 
month 62 : balance 273416 
month 63 : balance 272930 
month 64 : balance 272442 
month 65 : balance 271952 
month 66 : balance 271460 
month 67 : balance 270966 
month 68 : balance 270470 
month 69 : balance 269972 
month 70 : balance 269472 
month 71 : balance 268970 
month 72 : balance 268465 
month 73 : balance 267959 
month 74 : balance 267451 
month 75 : balance 266941 
month 76 : balance 266428 
month 77 : balance 265914 
month 78 : balance 265397 
month 79 : balance 264878 
month 80 : balance 264357 
month 81 : balance 263834 
month 82 : balance 263309 
month 83 : balance 262782 
month 84 : balance 262253 
month 85 : balance 261721 
month 86 : balance 261187 
month 87 : balance 260651 
month 88 : balance 260113 
month 89 : balance 259573 
month 90 : balance 259031 
month 91 : balance 258486 
month 92 : balance 257939 
month 93 : balance 257390 
month 94 : balance 256839 
month 95 : balance 256285 
month 96 : balance 255729 
month 97 : balance 255171 
month 98 : balance 254611 
month 99 : balance 254048 
month 100 : balance 253483 
month 101 : balance 252916 
month 102 : balance 252346 
month 103 : balance 251774 
month 104 : balance 251200 
month 105 : balance 250623 
month 106 : balance 250044 
month 107 : balance 249463 
month 108 : balance 248879 
month 109 : balance 248293 
month 110 : balance 247705 
month 111 : balance 247114 
month 112 : balance 246521 
month 113 : balance 245925 
month 114 : balance 245327 
month 115 : balance 244727 
month 116 : balance 244124 
month 117 : balance 243518 
month 118 : balance 242911 
month 119 : balance 242300 
month 120 : balance 241687 
month 121 : balance 241072 
month 122 : balance 240454 
month 123 : balance 239834 
month 124 : balance 239211 
month 125 : balance 238585 
month 126 : balance 237958 
month 127 : balance 237327 
month 128 : balance 236694 
month 129 : balance 236058 
month 130 : balance 235420 
month 131 : balance 234779 
month 132 : balance 234136 
month 133 : balance 233489 
month 134 : balance 232841 
month 135 : balance 232189 
month 136 : balance 231535 
month 137 : balance 230879 
month 138 : balance 230219 
month 139 : balance 229557 
month 140 : balance 228892 
month 141 : balance 228225 
month 142 : balance 227555 
month 143 : balance 226882 
month 144 : balance 226206 
month 145 : balance 225528 
month 146 : balance 224847 
month 147 : balance 224163 
month 148 : balance 223476 
month 149 : balance 222786 
month 150 : balance 222094 
month 151 : balance 221399 
month 152 : balance 220701 
month 153 : balance 220000 
month 154 : balance 219296 
month 155 : balance 218590 
month 156 : balance 217880 
month 157 : balance 217168 
month 158 : balance 216453 
month 159 : balance 215735 
month 160 : balance 215014 
month 161 : balance 214290 
month 162 : balance 213563 
month 163 : balance 212833 
month 164 : balance 212100 
month 165 : balance 211364 
month 166 : balance 210625 
month 167 : balance 209883 
month 168 : balance 209138 
month 169 : balance 208390 
month 170 : balance 207639 
month 171 : balance 206885 
month 172 : balance 206128 
month 173 : balance 205368 
month 174 : balance 204605 
month 175 : balance 203838 
month 176 : balance 203069 
month 177 : balance 202296 
month 178 : balance 201520 
month 179 : balance 200741 
month 180 : balance 199959 
month 181 : balance 199174 
month 182 : balance 198385 
month 183 : balance 197593 
month 184 : balance 196798 
month 185 : balance 196000 
month 186 : balance 195199 
month 187 : balance 194394 
month 188 : balance 193586 
month 189 : balance 192775 
month 190 : balance 191960 
month 191 : balance 191142 
month 192 : balance 190321 
month 193 : balance 189496 
month 194 : balance 188668 
month 195 : balance 187837 
month 196 : balance 187002 
month 197 : balance 186164 
month 198 : balance 185323 
month 199 : balance 184478 
month 200 : balance 183629 
month 201 : balance 182777 
month 202 : balance 181922 
month 203 : balance 181063 
month 204 : balance 180201 
month 205 : balance 179335 
month 206 : balance 178466 
month 207 : balance 177593 
month 208 : balance 176716 
month 209 : balance 175836 
month 210 : balance 174953 
month 211 : balance 174065 
month 212 : balance 173175 
month 213 : balance 172280 
month 214 : balance 171382 
month 215 : balance 170480 
month 216 : balance 169575 
month 217 : balance 168666 
month 218 : balance 167753 
month 219 : balance 166836 
month 220 : balance 165916 
month 221 : balance 164992 
month 222 : balance 164064 
month 223 : balance 163133 
month 224 : balance 162197 
month 225 : balance 161258 
month 226 : balance 160315 
month 227 : balance 159368 
month 228 : balance 158417 
month 229 : balance 157463 
month 230 : balance 156504 
month 231 : balance 155542 
month 232 : balance 154576 
month 233 : balance 153605 
month 234 : balance 152631 
month 235 : balance 151653 
month 236 : balance 150671 
month 237 : balance 149685 
month 238 : balance 148695 
month 239 : balance 147700 
month 240 : balance 146702 
month 241 : balance 145700 
month 242 : balance 144693 
month 243 : balance 143683 
month 244 : balance 142668 
month 245 : balance 141650 
month 246 : balance 140627 
month 247 : balance 139600 
month 248 : balance 138568 
month 249 : balance 137533 
month 250 : balance 136493 
month 251 : balance 135449 
month 252 : balance 134401 
month 253 : balance 133349 
month 254 : balance 132292 
month 255 : balance 131231 
month 256 : balance 130166 
month 257 : balance 129096 
month 258 : balance 128022 
month 259 : balance 126943 
month 260 : balance 125861 
month 261 : balance 124773 
month 262 : balance 123682 
month 263 : balance 122586 
month 264 : balance 121485 
month 265 : balance 120380 
month 266 : balance 119270 
month 267 : balance 118156 
month 268 : balance 117038 
month 269 : balance 115915 
month 270 : balance 114787 
month 271 : balance 113654 
month 272 : balance 112518 
month 273 : balance 111376 
month 274 : balance 110230 
month 275 : balance 109079 
month 276 : balance 107923 
month 277 : balance 106763 
month 278 : balance 105598 
month 279 : balance 104428 
month 280 : balance 103254 
month 281 : balance 102074 
month 282 : balance 100890 
month 283 : balance 99701 
month 284 : balance 98507 
month 285 : balance 97309 
month 286 : balance 96105 
month 287 : balance 94897 
month 288 : balance 93683 
month 289 : balance 92465 
month 290 : balance 91242 
month 291 : balance 90013 
month 292 : balance 88780 
month 293 : balance 87542 
month 294 : balance 86298 
month 295 : balance 85050 
month 296 : balance 83797 
month 297 : balance 82538 
month 298 : balance 81274 
month 299 : balance 80005 
month 300 : balance 78731 
month 301 : balance 77452 
month 302 : balance 76168 
month 303 : balance 74878 
month 304 : balance 73583 
month 305 : balance 72283 
month 306 : balance 70977 
month 307 : balance 69666 
month 308 : balance 68350 
month 309 : balance 67029 
month 310 : balance 65702 
month 311 : balance 64369 
month 312 : balance 63032 
month 313 : balance 61688 
month 314 : balance 60340 
month 315 : balance 58986 
month 316 : balance 57626 
month 317 : balance 56261 
month 318 : balance 54890 
month 319 : balance 53514 
month 320 : balance 52132 
month 321 : balance 50744 
month 322 : balance 49351 
month 323 : balance 47952 
month 324 : balance 46547 
month 325 : balance 45137 
month 326 : balance 43721 
month 327 : balance 42299 
month 328 : balance 40871 
month 329 : balance 39438 
month 330 : balance 37998 
month 331 : balance 36553 
month 332 : balance 35102 
month 333 : balance 33645 
month 334 : balance 32182 
month 335 : balance 30713 
month 336 : balance 29238 
month 337 : balance 27758 
month 338 : balance 26271 
month 339 : balance 24778 
month 340 : balance 23279 
month 341 : balance 21773 
month 342 : balance 20262 
month 343 : balance 18745 
month 344 : balance 17221 
month 345 : balance 15691 
month 346 : balance 14155 
month 347 : balance 12613 
month 348 : balance 11064 
month 349 : balance 9509 
month 350 : balance 7948 
month 351 : balance 6380 
month 352 : balance 4806 
month 353 : balance 3226 
month 354 : balance 1639 
month 355 : balance 46 
month 356 : balance -1554 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>total payments made 569600 </code></pre>
</div>
</div>
<p>So our nice young couple have paid off their $300,000 loan in just 4 months shy of the 30 year term of their loan, at a bargain basement price of $568,046 (since 569600 - 1554 = 568046). A happy ending!</p>
</section>
</section>
<section id="sec-if" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="sec-if"><span class="header-section-number">3.3</span> Conditional statements</h2>
<p>A second kind of flow control that programming languages provide is the ability to evaluate <strong><em>conditional statements</em></strong>. Unlike loops, which can repeat over and over again, a conditional statement only executes once, but it can switch between different possible commands depending on a CONDITION that is specified by the programmer. The power of these commands is that they allow the program itself to make choices, and in particular, to make different choices depending on the context in which the program is run. The most prominent of example of a conditional statement is the <code>if</code> statement, and the accompanying <code>else</code> statement. The basic format of an <code>if</code> statement in R is as follows:</p>
<pre><code>     if ( CONDITION ) {
        STATEMENT1
        STATEMENT2
        ETC
     }</code></pre>
<p>And the execution of the statement is pretty straightforward. If the CONDITION is true, then R will execute the statements contained in the curly braces. If the CONDITION is false, then it dose not. If you want to, you can extend the <code>if</code> statement to include an <code>else</code> statement as well, leading to the following syntax:</p>
<pre><code>     if ( CONDITION ) {
        STATEMENT1
        STATEMENT2
        ETC
     } else {
        STATEMENT3
        STATEMENT4
        ETC
     }     </code></pre>
<p>As you’d expect, the interpretation of this version is similar. If the CONDITION is true, then the contents of the first block of code (i.e., STATEMENT1, STATEMENT2, ETC) are executed; but if it is false, then the contents of the second block of code (i.e., STATEMENT3, STATEMENT4, ETC) are executed instead.</p>
<p>To give you a feel for how you can use <code>if</code> and <code>else</code> to do something useful, the example that I’ll show you is a script that prints out a different message depending on what day of the week you run it. Here’s the script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- ifelseexample.R</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># find out what day it is...</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">now</span>()       <span class="co"># pull the date from the system clock</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>day <span class="ot">&lt;-</span> <span class="fu">weekdays</span>(today) <span class="co"># what day of the week it is_</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># now make a choice depending on the day...</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> ( day <span class="sc">==</span> <span class="st">"Monday"</span> ) {</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>( <span class="st">"I don't like Mondays"</span> )</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>( <span class="st">"I'm a happy little automaton"</span> )</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since today happens to be a Friday, when I run the script here’s what happens:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I'm a happy little automaton"</code></pre>
</div>
</div>
<p>There are other ways of making conditional statements in R. In particular, the <code>ifelse()</code> function and the <code>switch()</code> functions can be very useful in different contexts. However, my main aim in this chapter is to briefly cover the very basics, so I’ll move on.</p>
</section>
<section id="sec-writingfunctions" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="sec-writingfunctions"><span class="header-section-number">3.4</span> Writing functions</h2>
<p>In this section I want to talk about functions again. Functions were introduced in <a href="programming.html#sec-usingfunctions"><span>Section&nbsp;2.4</span></a>, but you’ve learned a lot about R since then, so we can talk about them in more detail. In particular, I want to show you how to create your own. To stick with the same basic framework that I used to describe loops and conditionals, here’s the syntax that you use to create a function:</p>
<pre><code>     FNAME &lt;- function ( ARG1, ARG2, ETC ) {
        STATEMENT1
        STATEMENT2
        ETC
        return( VALUE )
     }</code></pre>
<p>What this does is create a function with the name FNAME, which has arguments ARG1, ARG2 and so forth. Whenever the function is called, R executes the statements in the curly braces, and then outputs the contents of VALUE to the user. Note, however, that R does not execute the commands inside the function in the workspace. Instead, what it does is create a temporary local environment: all the internal statements in the body of the function are executed there, so they remain invisible to the user. Only the final results in the VALUE are returned to the workspace.</p>
<p>To give a simple example of this, let’s create a function called <code>quadruple()</code> which multiplies its inputs by four. In keeping with the approach taken in the rest of the chapter, I’ll use a script to do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- functionexample.R</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>quadruple <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> x<span class="sc">*</span><span class="dv">4</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>} </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When we run this script, as follows</p>
<p>Nothing appears to have happened, but there is a new object created in the workspace called <code>quadruple</code>. Not surprisingly, if we ask R to tell us what kind of object it is, it tells us that it is a function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>( quadruple )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "function"</code></pre>
</div>
</div>
<p>And now that we’ve created the <code>quadruple()</code> function, we can call it just like any other function. And if I want to store the output as a variable, I can do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>my.var <span class="ot">&lt;-</span> <span class="fu">quadruple</span>(<span class="dv">10</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(my.var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 40</code></pre>
</div>
</div>
<p>An important thing to recognise here is that the two internal variables that the <code>quadruple()</code> function makes use of, <code>x</code> and <code>y</code>, stay “internal” to that function. If we inspect the contents of the workspace using <code>ls()</code>, everything else we have created in our workspace, including the <code>quadruple()</code> function itself as well as the <code>my.var</code> variable that we just created. But will <strong>will not see</strong> the <code>x</code> and <code>y</code> variables used <em>inside</em> our <code>quadruple</code> function. And, if we happened to have created variables named <code>x</code> or <code>y</code> earlier (e.g., before writing our <code>quadruple</code> function), the <code>x</code> and <code>y</code> variables we see in our workspace would <strong>not</strong> be the variables used by <code>quadruple()</code>. Got all that?</p>
<p>Now that we know how to create our own functions in R, it’s probably a good idea to talk a little more about some of the other properties of functions that I’ve been glossing over. To start with, let’s take this opportunity to type the name of the function at the command line without the parentheses:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>quadruple</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function(x) {
  y &lt;- x*4
  return(y)
}</code></pre>
</div>
</div>
<p>As you can see, when you type the name of a function at the command line, R prints out the underlying source code that we used to define the function in the first place. In the case of the <code>quadruple()</code> function, this is quite helpful to us – we can read this code and actually see what the function does. For other functions, this is less helpful, as we saw back in <a href="programming.html#sec-usingfunctions"><span>Section&nbsp;2.4</span></a> when we tried typing <code>citation</code> rather than <code>citation()</code>.</p>
<section id="sec-dotsargument" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="sec-dotsargument"><span class="header-section-number">3.4.1</span> Function arguments revisited</h3>
<p>Okay, now that we are starting to get a sense for how functions are constructed, let’s have a look at two, slightly more complicated functions that I’ve created. The source code for these functions is contained within the <code>functionexample2.R</code> and <code>functionexample3.R</code> scripts. Let’s start by looking at the first one:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- functionexample2.R</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>pow <span class="ot">&lt;-</span> <span class="cf">function</span>( x, <span class="at">y =</span> <span class="dv">1</span>) {</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> x<span class="sc">^</span>y  <span class="co"># raise x to the power y</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>( out )</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and if we type <code>source("functionexample2.R")</code> to load the <code>pow()</code> function into our workspace, then we can make use of it. As you can see from looking at the code for this function, it has two arguments <code>x</code> and <code>y</code>, and all it does is raise <code>x</code> to the power of <code>y</code>. For instance, this command</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pow</span>(<span class="at">x=</span><span class="dv">3</span>, <span class="at">y=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
<p>calculates the value of <span class="math inline">\(3^2\)</span>. The interesting thing about this function isn’t what it does, because R already has has perfectly good mechanisms for calculating powers. Rather, notice that when we defined the function, we specified <code>y=1</code> when listing the arguments? That’s the default value for <code>y</code>. So if we enter a command without specifying a value for <code>y</code>, then the function assumes that we want <code>y=1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pow</span>(<span class="at">x=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>However, since we didn’t specify any default value for <code>x</code> when we defined the <code>pow()</code> function, we always need to input a value for <code>x</code>. If we don’t R will spit out an error message.</p>
<p>So now you know how to specify default values for an argument. The other thing I should point out while I’m on this topic is the use of the <code>...</code> argument. The <code>...</code> argument is a special construct in R which is only used within functions. It is used as a way of matching against multiple user inputs: in other words, <code>...</code> is used as a mechanism to allow the user to enter as many inputs as they like. I won’t talk at all about the low-level details of how this works at all, but I will show you a simple example of a function that makes use of it. To that end, consider the following script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">## --- functionexample3.R</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>doubleMax <span class="ot">&lt;-</span> <span class="cf">function</span>( ... ) {  </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  max.val <span class="ot">&lt;-</span> <span class="fu">max</span>( ... )   <span class="co"># find the largest value in ... </span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> max.val      <span class="co"># double it</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>( out )</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we then typed <code>source("functionexample3.R")</code>, R would create the <code>doubleMax()</code> function. You could type in as many inputs as you like. The <code>doubleMax()</code> function would identifies the largest value in the inputs, by passing all the user inputs to the <code>max()</code> function, and then double it. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">doubleMax</span>( <span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
</section>
<section id="theres-more-to-functions-than-this" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="theres-more-to-functions-than-this"><span class="header-section-number">3.4.2</span> There’s more to functions than this</h3>
<p>There’s a lot of other details to functions that I’ve hidden in my description in this chapter. Experienced programmers will wonder exactly how the “scoping rules” work in R or want to know how to use a function to create variables in other environments, or if function objects can be assigned as elements of a list, and probably hundreds of other things besides. However, I don’t want to have this discussion get too cluttered with details, so I think it’s best – at least for the purposes of the current book – to stop here.</p>
</section>
</section>
<section id="sec-vectorised" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="sec-vectorised"><span class="header-section-number">3.5</span> Implicit loops</h2>
<p>There’s one last topic I want to discuss in this chapter. In addition to providing the explicit looping structures via <code>while</code> and <code>for</code>, R also provides a collection of functions for <strong><em>implicit loops</em></strong>. What I mean by this is that these are functions that carry out operations very similar to those that you’d normally use a loop for. However, instead of typing out the whole loop, the whole thing is done with a single command. The main reason why this can be handy is that – due to the way that R is written – these implicit looping functions are usually about to do the same calculations much faster than the corresponding explicit loops. In most applications that beginners might want to undertake, this probably isn’t very important, since most beginners tend to start out working with fairly small data sets and don’t usually need to undertake extremely time consuming number crunching. However, because you often see these functions referred to in other contexts, it may be useful to very briefly discuss a few of them.</p>
<p>The first and simplest of these functions is <code>sapply()</code>. The two most important arguments to this function are <code>X</code>, which specifies a vector containing the data, and <code>FUN</code>, which specifies the name of a function that should be applied to each element of the data vector. The following example illustrates the basics of how it works:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"along"</span>, <span class="st">"the"</span>, <span class="st">"loom"</span>, <span class="st">"of"</span>, <span class="st">"the"</span>, <span class="st">"land"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>( <span class="at">X =</span> words, <span class="at">FUN =</span> nchar )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>along   the  loom    of   the  land 
    5     3     4     2     3     4 </code></pre>
</div>
</div>
<p>Notice how similar this is to the second example of a <code>for</code> loop in <a href="#sec-for"><span>Section&nbsp;3.2.2</span></a>. The <code>sapply()</code> function has implicitly looped over the elements of <code>words</code>, and for each such element applied the <code>nchar()</code> function to calculate the number of letters in the corresponding word.</p>
<p>The second of these functions is <code>tapply()</code>, which has three key arguments. As before <code>X</code> specifies the data, and <code>FUN</code> specifies a function. However, there is also an <code>INDEX</code> argument which specifies a grouping variable.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> What the <code>tapply()</code> function does is loop over all of the different values that appear in the <code>INDEX</code> variable. Each such value defines a group: the <code>tapply()</code> function constructs the subset of <code>X</code> that corresponds to that group, and then applies the function <code>FUN</code> to that subset of the data. This probably sounds a little abstract, so let’s consider a specific example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"male"</span>,<span class="st">"male"</span>,<span class="st">"female"</span>,<span class="st">"female"</span>,<span class="st">"male"</span> )</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">9</span>,<span class="dv">11</span>,<span class="dv">13</span> )</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>( <span class="at">X =</span> age, <span class="at">INDEX =</span> gender, <span class="at">FUN =</span> mean )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  female     male 
10.00000 11.66667 </code></pre>
</div>
</div>
<p>In this extract, what we’re doing is using <code>gender</code> to define two different groups of people, and using their <code>ages</code> as the data. We then calculate the <code>mean()</code> of the ages, separately for the males and the females. A closely related function is <code>by()</code>. It actually does the same thing as <code>tapply()</code>, but the output is formatted a bit differently. This time around the three arguments are called <code>data</code>, <code>INDICES</code> and <code>FUN</code>, but they’re pretty much the same thing. An example of how to use the <code>by()</code> function is shown in the following extract:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">by</span>( <span class="at">data =</span> age, <span class="at">INDICES =</span> gender, <span class="at">FUN =</span> mean )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>gender: female
[1] 10
------------------------------------------------------------ 
gender: male
[1] 11.66667</code></pre>
</div>
</div>
<p>The <code>tapply()</code> and <code>by()</code> functions are quite handy things to know about, and are pretty widely used. However, although I do make passing reference to the <code>tapply()</code> later on, I don’t make much use of them in this book.</p>
<p>Before moving on, I should mention that there are several other functions that work along similar lines, and have suspiciously similar names: <code>lapply</code>, <code>mapply</code>, <code>apply</code>, <code>vapply</code>, <code>rapply</code> and <code>eapply</code>. However, none of these come up anywhere else in this book, so all I wanted to do here is draw your attention to the fact that they exist.</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Or a list of such variables.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./programming.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R as a Calculator</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>